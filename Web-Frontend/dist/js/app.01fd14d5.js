(()=>{"use strict";var e={6028:(e,t,a)=>{a(3792),a(3362),a(9085),a(9391);var r=a(3751),n=(a(2010),a(641)),l={class:"app-container"},o={class:"app-main"},s={class:"app-content"},i={class:"content-wrapper"};function u(e,t,a,r,u,c){var d=(0,n.g2)("HeaderBar"),p=(0,n.g2)("Sidebar"),v=(0,n.g2)("Tabs"),g=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",l,[(0,n.bF)(d,{"sidebar-opened":r.sidebarOpened,onToggleSidebar:r.toggleSidebar},null,8,["sidebar-opened","onToggleSidebar"]),(0,n.Lk)("div",o,[(0,n.bF)(p,{"sidebar-opened":r.sidebarOpened,"active-tab":r.activeTab,onSwitchTab:r.switchTab},null,8,["sidebar-opened","active-tab","onSwitchTab"]),(0,n.Lk)("main",s,[(0,n.bF)(v,{onTabChange:r.handleTabChange},null,8,["onTabChange"]),(0,n.Lk)("div",i,[((0,n.uX)(),(0,n.Wv)(n.PR,{include:["SearchView","PathView","EventView"]},[((0,n.uX)(),(0,n.Wv)(g,{key:"Search"===e.$route.name?"search-view":"Event"===e.$route.name?"event-view":e.$route.fullPath}))],1024))])])])])}a(4114);var c=a(953),d=a(5220),p=a(33),v={class:"app-header"},g={class:"header-left"};function f(e,t,a,r,l,o){return(0,n.uX)(),(0,n.CE)("header",v,[(0,n.Lk)("div",g,[(0,n.Lk)("button",{class:"sidebar-toggle",onClick:t[0]||(t[0]=function(){return r.toggleSidebar&&r.toggleSidebar.apply(r,arguments)})},[(0,n.Lk)("i",{class:(0,p.C4)(["fa",a.sidebarOpened?"fa-angle-left":"fa-angle-right"])},null,2)]),t[1]||(t[1]=(0,n.Lk)("div",{class:"logo"},[(0,n.Lk)("img",{src:"/logo.png",alt:"Logo"}),(0,n.Lk)("span",null,"演示系统")],-1))]),t[2]||(t[2]=(0,n.Lk)("div",{class:"header-right"},[(0,n.Lk)("div",{class:"user-info"},[(0,n.Lk)("img",{src:"/user-avatar.png",alt:"用户头像",class:"avatar"}),(0,n.Lk)("span",null,"管理员")])],-1))])}const m={name:"Header",props:{sidebarOpened:{type:Boolean,default:!0}},emits:["toggleSidebar"],setup:function(e,t){var a=t.emit,r=function(){a("toggleSidebar")};return{toggleSidebar:r}}};var h=a(6262);const y=(0,h.A)(m,[["render",f],["__scopeId","data-v-0ac8e3f2"]]),k=y;a(1392);var b={class:"sidebar-menu"},x={class:"submenu"};const w={__name:"Sidebar",props:{sidebarOpened:{type:Boolean,default:!0},activeTab:{type:String,default:"tool"}},emits:["switchTab"],setup:function(e,t){var a=t.emit,l=e,o=a,s=(0,c.KR)("trace"),i=(0,c.KR)(!1),u=(0,n.EW)(function(){return i.value}),d=function(e){"tool"===e&&(i.value=!i.value),o("switchTab",e)},v=function(e){s.value=e,o("switchTab","tool-".concat(e))};return(0,n.wB)(function(){return l.activeTab},function(e){if(e.startsWith("tool-")){var t=e.split("-")[1];s.value=t}}),function(t,a){return(0,n.uX)(),(0,n.CE)("div",{class:(0,p.C4)(["app-sidebar",{"sidebar-closed":!e.sidebarOpened}])},[(0,n.Lk)("nav",b,[(0,n.Lk)("ul",null,[(0,n.Lk)("li",{class:(0,p.C4)(["menu-item",{active:"tool"===e.activeTab}])},[(0,n.Lk)("a",{href:"#",onClick:a[0]||(a[0]=(0,r.D$)(function(e){return d("tool")},["prevent"]))},[a[7]||(a[7]=(0,n.Lk)("i",{class:"fas fa-project-diagram"},null,-1)),a[8]||(a[8]=(0,n.Lk)("span",null,"多模态传播模型工具",-1)),(0,n.Lk)("i",{class:"expand-arrow fas fa-chevron-right",style:(0,p.Tr)({transform:i.value?"rotate(90deg)":"rotate(0deg)"})},null,4)]),(0,n.bo)((0,n.Lk)("ul",x,[(0,n.Lk)("li",{class:(0,p.C4)(["submenu-item",{active:"trace"===s.value}])},[(0,n.Lk)("a",{href:"#",onClick:a[1]||(a[1]=(0,r.D$)(function(e){return v("trace")},["prevent"]))},a[9]||(a[9]=[(0,n.Lk)("i",{class:"fas fa-search"},null,-1),(0,n.Lk)("span",null,"溯源",-1)]))],2),(0,n.Lk)("li",{class:(0,p.C4)(["submenu-item",{active:"path"===s.value}])},[(0,n.Lk)("a",{href:"#",onClick:a[2]||(a[2]=(0,r.D$)(function(e){return v("path")},["prevent"]))},a[10]||(a[10]=[(0,n.Lk)("i",{class:"fas fa-road"},null,-1),(0,n.Lk)("span",null,"路径",-1)]))],2),(0,n.Lk)("li",{class:(0,p.C4)(["submenu-item",{active:"event"===s.value}])},[(0,n.Lk)("a",{href:"#",onClick:a[3]||(a[3]=(0,r.D$)(function(e){return v("event")},["prevent"]))},a[11]||(a[11]=[(0,n.Lk)("i",{class:"fas fa-file-alt"},null,-1),(0,n.Lk)("span",null,"事件详情",-1)]))],2)],512),[[r.aG,u.value]])],2),(0,n.Lk)("li",{class:(0,p.C4)(["menu-item",{active:"risk"===e.activeTab}])},[(0,n.Lk)("a",{href:"#",onClick:a[4]||(a[4]=(0,r.D$)(function(e){return d("risk")},["prevent"]))},a[12]||(a[12]=[(0,n.Lk)("i",{class:"fas fa-exclamation-triangle"},null,-1),(0,n.Lk)("span",null,"风险传播事件库",-1)]))],2),(0,n.Lk)("li",{class:(0,p.C4)(["menu-item",{active:"fake"===e.activeTab}])},[(0,n.Lk)("a",{href:"#",onClick:a[5]||(a[5]=(0,r.D$)(function(e){return d("fake")},["prevent"]))},a[13]||(a[13]=[(0,n.Lk)("i",{class:"fas fa-ban"},null,-1),(0,n.Lk)("span",null,"虚假信息知识库",-1)]))],2),(0,n.Lk)("li",{class:(0,p.C4)(["menu-item",{active:"bad"===e.activeTab}])},[(0,n.Lk)("a",{href:"#",onClick:a[6]||(a[6]=(0,r.D$)(function(e){return d("bad")},["prevent"]))},a[14]||(a[14]=[(0,n.Lk)("i",{class:"fas fa-times-circle"},null,-1),(0,n.Lk)("span",null,"不良内容知识库",-1)]))],2)])])],2)}}},L=(0,h.A)(w,[["__scopeId","data-v-e7f4a1fe"]]),C=L;var E={class:"tabs-container"},_={class:"tab-scroll-wrapper"},S={class:"tabs"},T=["onClick"],D={class:"tab-title"},I=["onClick"];function X(e,t,a,l,o,s){return(0,n.uX)(),(0,n.CE)("div",E,[(0,n.Lk)("div",_,[(0,n.Lk)("div",S,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.tabs,function(e){return(0,n.uX)(),(0,n.CE)("div",{key:e.key,class:(0,p.C4)(["tab-item",{active:e.key===l.currentTabKey}]),onClick:function(t){return l.switchTab(e.key)}},[(0,n.Lk)("span",D,(0,p.v_)(e.title),1),e.closable?((0,n.uX)(),(0,n.CE)("span",{key:0,class:"tab-close",onClick:(0,r.D$)(function(t){return l.closeTab(e.key)},["stop"])},t[0]||(t[0]=[(0,n.Lk)("i",{class:"fa fa-times"},null,-1)]),8,I)):(0,n.Q3)("",!0)],10,T)}),128))])])])}a(113),a(8980),a(5086),a(4554),a(8111),a(116),a(3579),a(6099);const A={name:"Tabs",emits:["tab-change"],setup:function(e,t){var a=t.emit,r=(0,d.lq)(),l=(0,d.rd)(),o=(0,c.KR)([{key:"trace",title:"溯源",path:"/trace",closable:!1}]),s=(0,c.KR)("trace"),i=function(){var e=r.name,t="trace",a="溯源",n="/trace",l=!1;if("Search"===e?(t="trace",a="溯源",n=r.fullPath):"Path"===e?(t="path",a="路径",n=r.fullPath,l=!0):"Event"===e&&(t="event",a="事件详情",n=r.fullPath,l=!0),s.value=t,o.value.some(function(e){return e.key===t})){var i=o.value.findIndex(function(e){return e.key===t});-1!==i&&(o.value[i].path=n,"Event"===e&&(o.value[i].title=a))}else o.value.push({key:t,title:a,path:n,closable:l})};i(),(0,n.wB)(function(){return r.fullPath},function(){i()});var u=function(e){var t=o.value.find(function(t){return t.key===e});t&&(s.value=e,l.push(t.path),a("tab-change",t))},p=function(e){if(!(o.value.length<=1)){var t=o.value.findIndex(function(t){return t.key===e});if(-1!==t){if(e===s.value){var a=o.value[t-1]||o.value[0];u(a.key)}o.value.splice(t,1)}}};return{tabs:o,currentTabKey:s,switchTab:u,closeTab:p}}},P=(0,h.A)(A,[["render",X],["__scopeId","data-v-04e21f1e"]]),R=P,N={name:"App",components:{HeaderBar:k,Sidebar:C,Tabs:R},setup:function(){var e=(0,d.lq)(),t=(0,d.rd)(),a=(0,c.KR)(!0),r=(0,c.KR)("trace"),l=(0,c.KR)(["SearchView","PathView","EventView"]);(0,n.wB)(function(){return e.name},function(e,t){console.log("路由变化:",t,"->",e)});var o=function(){a.value=!a.value},s=function(e){r.value=e,"trace"===e||"tool-trace"===e||"tool"===e?t.push("/trace"):"path"===e||"tool-path"===e?t.push("/path"):"event"===e||"tool-event"===e?t.push("/event"):"risk"===e?t.push("/risk"):"fake"===e?t.push("/fake"):"bad"===e&&t.push("/bad")};(0,n.wB)(function(){return e.name},function(e){r.value="Search"===e||"Trace"===e?"Search"===e?"trace":"tool-trace":"Path"===e?"tool-path":"Event"===e?"tool-event":e.toLowerCase()});var i=function(e){console.log("切换到标签:",e)};return{sidebarOpened:a,activeTab:r,cachedViews:l,toggleSidebar:o,switchTab:s,handleTabChange:i}}},G=(0,h.A)(N,[["render",u]]),K=G;a(4423),a(1699);var U={class:"search-view"},M={class:"bg-white rounded-xl shadow-lg p-6 mb-6"},j={class:"space-y-6"},V={class:"w-full"},O={class:"relative"},B={class:"relative"},F=["accept"],Q={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between"},W={class:"flex items-center gap-6 flex-wrap"},z={class:"flex items-center"},$={class:"flex items-center"},q={class:"flex items-center"},Y={key:0,class:"text-red-500 text-sm mt-2 animate-fade-in"},H={class:"bg-white rounded-xl shadow-lg p-6 mb-6"},J={class:"flex justify-between items-center mb-4"},Z={class:"platform-filter"},ee={key:0,class:"text-center py-12"},te={key:1},ae={class:"overflow-x-auto"},re={class:"min-w-full divide-y divide-gray-200"},ne={class:"bg-white divide-y divide-gray-200"},le={class:"px-6 py-4 text-sm text-gray-700 max-w-xs truncate"},oe=["onClick"],se={key:1,class:"text-gray-700 font-medium"},ie={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"},ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"},ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"},de={class:"px-6 py-4 whitespace-nowrap text-sm text-center"},pe=["onClick"],ve={key:1,class:"text-gray-400"},ge={class:"px-6 py-4 whitespace-nowrap text-sm text-center"},fe=["onClick"],me={key:1,class:"text-gray-400"},he={class:"px-6 py-4 whitespace-nowrap text-center"},ye={class:"flex justify-center mt-4 pagination-controls items-center space-x-2"},ke=["disabled"],be={class:"px-2 py-1 text-sm text-gray-500 leading-none"},xe=["disabled"],we={key:0,class:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4"},Le={class:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-auto"},Ce={key:1,class:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4"},Ee={class:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-auto"};function _e(e,t,a,l,o,s){var i=(0,n.g2)("ImageShow"),u=(0,n.g2)("VideoShow");return(0,n.uX)(),(0,n.CE)("div",U,[(0,n.Lk)("div",M,[t[27]||(t[27]=(0,n.Lk)("h3",{class:"text-xl font-semibold text-gray-800 mb-4"}," 溯源查询",-1)),(0,n.Lk)("div",j,[(0,n.Lk)("div",V,[t[19]||(t[19]=(0,n.Lk)("label",{for:"queryContent",class:"block text-base font-medium text-gray-700 mb-1"},"查询内容",-1)),(0,n.Lk)("div",O,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.queryContent=e}),id:"queryContent",class:"w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-300 resize-y",placeholder:"请输入查询内容",rows:"3",style:{"min-height":"100px"}},null,512),[[r.Jo,l.queryContent]]),l.queryContent?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:t[1]||(t[1]=function(e){return l.queryContent=""}),class:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600"},t[18]||(t[18]=[(0,n.Lk)("i",{class:"fa fa-times"},null,-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",B,[(0,n.Lk)("label",{class:"flex flex-col items-center justify-center w-full mx-auto border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors duration-300 py-2 min-h-[100px]",onDragover:t[3]||(t[3]=(0,r.D$)(function(){return l.onDragOver&&l.onDragOver.apply(l,arguments)},["prevent"])),onDragleave:t[4]||(t[4]=(0,r.D$)(function(){return l.onDragLeave&&l.onDragLeave.apply(l,arguments)},["prevent"])),onDrop:t[5]||(t[5]=(0,r.D$)(function(){return l.onDrop&&l.onDrop.apply(l,arguments)},["prevent"]))},[t[20]||(t[20]=(0,n.Lk)("i",{class:"fa fa-cloud-upload text-gray-500 mb-3 text-2xl"},null,-1)),(0,n.Lk)("span",{class:(0,p.C4)([{"text-green-600":l.uploadStatus.includes("✅"),"text-red-600":l.uploadStatus.includes("❌"),"text-gray-600":!l.uploadStatus},"text-center"])},(0,p.v_)(l.uploadStatus||"点击上传文件或拖放文件至此处"),3),(0,n.Lk)("input",{type:"file",class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:t[2]||(t[2]=function(){return l.handleFileUpload&&l.handleFileUpload.apply(l,arguments)}),accept:"image"===l.contentType?"image/*":"video"===l.contentType?"video/*":"*"},null,40,F)],32),l.selectedFile?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:t[6]||(t[6]=function(e){l.selectedFile=null,l.uploadStatus=""}),class:"absolute -top-3 -right-3 bg-white px-2 py-1 rounded-full shadow-md text-red-500 hover:text-red-700"},t[21]||(t[21]=[(0,n.Lk)("i",{class:"fa fa-times-circle"},null,-1)]))):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Q,[(0,n.Lk)("div",W,[(0,n.Lk)("div",z,[(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"textType","onUpdate:modelValue":t[7]||(t[7]=function(e){return l.contentType=e}),value:"text",class:"mr-2"},null,512),[[r.XL,l.contentType]]),t[22]||(t[22]=(0,n.Lk)("label",{for:"textType",class:"text-gray-700"},"文本",-1))]),(0,n.Lk)("div",$,[(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"imageType","onUpdate:modelValue":t[8]||(t[8]=function(e){return l.contentType=e}),value:"image",class:"mr-2"},null,512),[[r.XL,l.contentType]]),t[23]||(t[23]=(0,n.Lk)("label",{for:"imageType",class:"text-gray-700"},"图片",-1))]),(0,n.Lk)("div",q,[(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"videoType","onUpdate:modelValue":t[9]||(t[9]=function(e){return l.contentType=e}),value:"video",class:"mr-2"},null,512),[[r.XL,l.contentType]]),t[24]||(t[24]=(0,n.Lk)("label",{for:"videoType",class:"text-gray-700"},"视频",-1))])]),(0,n.Lk)("button",{onClick:t[10]||(t[10]=function(){return l.executeSearch&&l.executeSearch.apply(l,arguments)}),class:"query-button"},t[25]||(t[25]=[(0,n.Lk)("i",{class:"fa fa-search mr-2"},null,-1),(0,n.eW)(" 查询 ")]))]),l.traceStore.errorMessage?((0,n.uX)(),(0,n.CE)("div",Y,[t[26]||(t[26]=(0,n.Lk)("i",{class:"fa fa-exclamation-circle mr-1"},null,-1)),(0,n.eW)((0,p.v_)(l.traceStore.errorMessage),1)])):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",H,[(0,n.Lk)("div",J,[t[29]||(t[29]=(0,n.Lk)("h3",{class:"text-xl font-semibold text-gray-800"},"查询结果",-1)),(0,n.Lk)("div",Z,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[11]||(t[11]=function(e){return l.traceStore.selectedPlatform=e}),class:"border border-gray-300 rounded-lg px-3 py-1.5 text-sm focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all"},t[28]||(t[28]=[(0,n.Fv)('<option value="" data-v-ceee6770>全部平台</option><option value="微博" data-v-ceee6770>微博</option><option value="百家号" data-v-ceee6770>百家号</option><option value="网易新闻" data-v-ceee6770>网易新闻</option><option value="今日头条" data-v-ceee6770>今日头条</option>',5)]),512),[[r.u1,l.traceStore.selectedPlatform]])])]),l.traceStore.loading?((0,n.uX)(),(0,n.CE)("div",ee,t[30]||(t[30]=[(0,n.Lk)("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1),(0,n.Lk)("p",{class:"mt-2 text-gray-500"},"正在查询数据...",-1)]))):((0,n.uX)(),(0,n.CE)("div",te,[(0,n.Lk)("div",ae,[(0,n.Lk)("table",re,[t[33]||(t[33]=(0,n.Lk)("thead",{class:"bg-gray-50"},[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{class:"px-6 py-3 text-center text-sm font-medium text-gray-500 uppercase tracking-wider"},"稿件(推文)"),(0,n.Lk)("th",{class:"px-6 py-3 text-center text-sm font-medium text-gray-500 uppercase tracking-wider"},"平台"),(0,n.Lk)("th",{class:"px-6 py-3 text-center text-sm font-medium text-gray-500 uppercase tracking-wider"},"作者"),(0,n.Lk)("th",{class:"px-6 py-3 text-center text-sm font-medium text-gray-500 uppercase tracking-wider"},"发布时间"),(0,n.Lk)("th",{class:"px-6 py-3 text-center text-sm font-medium text-gray-500 uppercase tracking-wider"},"图片"),(0,n.Lk)("th",{class:"px-6 py-3 text-center text-sm font-medium text-gray-500 uppercase tracking-wider"},"视频"),(0,n.Lk)("th",{class:"px-6 py-3 text-center text-sm font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"是否为源头")])],-1)),(0,n.Lk)("tbody",ne,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.traceStore.paginatedResults,function(e,a){return(0,n.uX)(),(0,n.CE)("tr",{key:e.id||a,class:"hover:bg-gray-50 transition-colors"},[(0,n.Lk)("td",le,[e.isSource?((0,n.uX)(),(0,n.CE)("a",{key:0,onClick:function(t){return l.switchToPathWithId({id:e.id,event:e.event})},class:"text-primary hover:text-primary/80 hover:underline cursor-pointer font-medium"},(0,p.v_)(e.content),9,oe)):((0,n.uX)(),(0,n.CE)("span",se,(0,p.v_)(e.content),1))]),(0,n.Lk)("td",ie,(0,p.v_)(e.datasource),1),(0,n.Lk)("td",ue,(0,p.v_)(e.uname),1),(0,n.Lk)("td",ce,(0,p.v_)(l.formatDate(e.publishtime)),1),(0,n.Lk)("td",de,[e.imageUrl?((0,n.uX)(),(0,n.CE)("a",{key:0,href:"#",onClick:(0,r.D$)(function(t){return l.viewImage(e.imageUrl)},["prevent"]),target:"_blank",class:"text-primary hover:underline flex items-center justify-center"},t[31]||(t[31]=[(0,n.Lk)("i",{class:"fa fa-image mr-1"},null,-1),(0,n.eW)(" 查看 ")]),8,pe)):((0,n.uX)(),(0,n.CE)("span",ve,"Null"))]),(0,n.Lk)("td",ge,[e.videoUrl?((0,n.uX)(),(0,n.CE)("a",{key:0,href:"#",onClick:(0,r.D$)(function(t){return l.viewVideo(e.videoUrl)},["prevent"]),target:"_blank",class:"text-primary hover:underline flex items-center justify-center"},t[32]||(t[32]=[(0,n.Lk)("i",{class:"fa fa-video-camera mr-1"},null,-1),(0,n.eW)(" 查看 ")]),8,fe)):((0,n.uX)(),(0,n.CE)("span",me,"Null"))]),(0,n.Lk)("td",he,[(0,n.Lk)("span",{class:(0,p.C4)([e.isSource?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800","px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},(0,p.v_)(e.isSource?"是":"否"),3)])])}),128))])])]),(0,n.Lk)("div",ye,[t[36]||(t[36]=(0,n.Lk)("span",{class:"text-sm text-gray-500 leading-none"},"10条/页",-1)),(0,n.Lk)("button",{onClick:t[12]||(t[12]=function(e){return l.traceStore.prevPage()}),disabled:1===l.traceStore.currentPage,class:"px-2 py-1 border rounded disabled:opacity-50 text-sm flex items-center justify-center"},t[34]||(t[34]=[(0,n.Lk)("i",{class:"fa fa-chevron-left"},null,-1)]),8,ke),(0,n.Lk)("span",be,(0,p.v_)(l.traceStore.currentPage)+" / "+(0,p.v_)(l.traceStore.totalPages),1),(0,n.Lk)("button",{onClick:t[13]||(t[13]=function(e){return l.traceStore.nextPage()}),disabled:l.traceStore.currentPage===l.traceStore.totalPages,class:"px-2 py-1 border rounded disabled:opacity-50 text-sm flex items-center justify-center"},t[35]||(t[35]=[(0,n.Lk)("i",{class:"fa fa-chevron-right"},null,-1)]),8,xe)])]))]),l.showImageModal?((0,n.uX)(),(0,n.CE)("div",we,[(0,n.Lk)("div",Le,[(0,n.Lk)("button",{onClick:t[14]||(t[14]=function(e){return l.showImageModal=!1}),class:"absolute top-4 right-4 text-white text-2xl"},"×"),(0,n.bF)(i,{imageUrl:l.currentMediaUrl,onClose:t[15]||(t[15]=function(e){return l.showImageModal=!1})},null,8,["imageUrl"])])])):(0,n.Q3)("",!0),l.showVideoModal?((0,n.uX)(),(0,n.CE)("div",Ce,[(0,n.Lk)("div",Ee,[(0,n.Lk)("button",{onClick:t[16]||(t[16]=function(e){return l.showVideoModal=!1}),class:"absolute top-4 right-4 text-white text-2xl"},"×"),(0,n.bF)(u,{videoUrl:l.currentMediaUrl,onClose:t[17]||(t[17]=function(e){return l.showVideoModal=!1})},null,8,["videoUrl"])])])):(0,n.Q3)("",!0)])}var Se=a(908),Te=a(8788),De=a(388),Ie=(a(2062),a(1701),a(2762),a(2008),a(4782),a(2489),a(810)),Xe=(0,Ie.nY)("trace",{state:function(){return{results:[],currentPage:1,itemsPerPage:10,selectedPlatform:"",loading:!1,errorMessage:""}},getters:{filteredResults:function(e){return e.selectedPlatform?e.results.filter(function(t){return t.datasource===e.selectedPlatform}):e.results},totalPages:function(e){return Math.ceil(this.filteredResults.length/e.itemsPerPage)},paginatedResults:function(e){var t=(e.currentPage-1)*e.itemsPerPage;return this.filteredResults.slice(t,t+e.itemsPerPage)}},actions:{setResults:function(e){this.results=e,this.currentPage=1},setCurrentPage:function(e){this.currentPage=e},prevPage:function(){this.currentPage>1&&this.currentPage--},nextPage:function(){this.currentPage<this.totalPages&&this.currentPage++},resetPagination:function(){this.currentPage=1},setSelectedPlatform:function(e){this.selectedPlatform=e,this.currentPage=1},setLoading:function(e){this.loading=e},setErrorMessage:function(e){this.errorMessage=e}}}),Ae={class:"text-center mb-4"},Pe={key:0,class:"text-gray-300 text-lg"},Re={key:0,class:"relative flex items-center justify-center h-[calc(90vh-120px)] bg-black rounded-lg"},Ne={class:"flex items-center justify-center w-full h-full overflow-hidden"},Ge=["src"],Ke={key:0,class:"absolute inset-0 flex items-center justify-center"},Ue={key:1,class:"flex justify-center mt-4 space-x-2 overflow-x-auto py-2"},Me=["onClick"],je=["src"],Ve={key:2,class:"h-[calc(90vh-120px)] flex items-center justify-center bg-black rounded-lg"};function Oe(e,t,a,l,o,s){return(0,n.uX)(),(0,n.CE)("div",{class:"fixed inset-0 bg-black bg-opacity-70 flex items-start justify-center z-50 pt-12",onClick:t[5]||(t[5]=function(t){return e.$emit("close")})},[(0,n.Lk)("div",{class:"relative bg-gray-900 rounded-lg shadow-2xl w-[90vw] h-[80vh] max-w-6xl p-6 transform -translate-y-2",onClick:t[4]||(t[4]=(0,r.D$)(function(){},["stop"]))},[(0,n.Lk)("div",Ae,[t[6]||(t[6]=(0,n.Lk)("h1",{class:"text-xl font-bold text-white inline-block mr-2"},"图片详情",-1)),s.imageList.length>1?((0,n.uX)(),(0,n.CE)("span",Pe," ("+(0,p.v_)(o.currentIndex+1)+"/"+(0,p.v_)(s.imageList.length)+") ",1)):(0,n.Q3)("",!0)]),s.imageList.length>0?((0,n.uX)(),(0,n.CE)("div",Re,[s.imageList.length>1?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:t[0]||(t[0]=function(){return s.prevImage&&s.prevImage.apply(s,arguments)}),class:(0,p.C4)(["absolute left-4 z-10 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-70 transition-all",{"opacity-50 cursor-not-allowed":0===o.currentIndex}])},t[7]||(t[7]=[(0,n.Lk)("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,n.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]),2)):(0,n.Q3)("",!0),(0,n.Lk)("div",Ne,[(0,n.Lk)("img",{src:s.imageList[o.currentIndex],alt:"预览图片",class:(0,p.C4)(["max-w-full max-h-full object-contain transition-opacity duration-300",{"opacity-0":!o.imageLoaded}]),onLoad:t[1]||(t[1]=function(e){return o.imageLoaded=!0})},null,42,Ge),o.imageLoaded?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",Ke,t[8]||(t[8]=[(0,n.Lk)("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"},null,-1)])))]),s.imageList.length>1?((0,n.uX)(),(0,n.CE)("button",{key:1,onClick:t[2]||(t[2]=function(){return s.nextImage&&s.nextImage.apply(s,arguments)}),class:(0,p.C4)(["absolute right-4 z-10 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-70 transition-all",{"opacity-50 cursor-not-allowed":o.currentIndex===s.imageList.length-1}])},t[9]||(t[9]=[(0,n.Lk)("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,n.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),2)):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),s.imageList.length>1?((0,n.uX)(),(0,n.CE)("div",Ue,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.imageList,function(e,t){return(0,n.uX)(),(0,n.CE)("button",{key:t,onClick:function(e){return o.currentIndex=t},class:(0,p.C4)(["flex-shrink-0 w-16 h-16 border-2 rounded overflow-hidden transition-all",{"border-blue-500 scale-105":o.currentIndex===t,"border-gray-600":o.currentIndex!==t}])},[(0,n.Lk)("img",{src:e,alt:"缩略图",class:"w-full h-full object-cover"},null,8,je)],10,Me)}),128))])):((0,n.uX)(),(0,n.CE)("div",Ve,t[10]||(t[10]=[(0,n.Lk)("p",{class:"text-gray-400"},"无图片数据",-1)]))),(0,n.Lk)("button",{onClick:t[3]||(t[3]=function(t){return e.$emit("close")}),class:"absolute top-4 right-4 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all"},t[11]||(t[11]=[(0,n.Lk)("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,n.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])}const Be={props:{imageUrl:String,showClose:{type:Boolean,default:!0}},data:function(){return{imageData:null,currentIndex:0,imageLoaded:!1}},computed:{imageList:function(){return this.imageData?this.imageData.split(";").filter(function(e){return e.trim()}):[]}},created:function(){this.imageData=this.imageUrl||localStorage.getItem("tempImage"),this.imageUrl||localStorage.removeItem("tempImage")},methods:{prevImage:function(){this.currentIndex>0&&(this.currentIndex--,this.imageLoaded=!1)},nextImage:function(){this.currentIndex<this.imageList.length-1&&(this.currentIndex++,this.imageLoaded=!1)},handleKeydown:function(e){"ArrowLeft"===e.key?this.prevImage():"ArrowRight"===e.key?this.nextImage():"Escape"===e.key&&this.$emit("close")}},mounted:function(){window.addEventListener("keydown",this.handleKeydown)},beforeUnmount:function(){window.removeEventListener("keydown",this.handleKeydown)}},Fe=(0,h.A)(Be,[["render",Oe],["__scopeId","data-v-4ba3540f"]]),Qe=Fe;var We={key:0},ze={controls:"",class:"max-w-full h-auto rounded-lg shadow-md"},$e=["src"],qe={key:1};function Ye(e,t,a,l,o,s){return(0,n.uX)(),(0,n.CE)("div",{class:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",onClick:t[1]||(t[1]=function(t){return e.$emit("close")})},[(0,n.Lk)("div",{class:"relative max-w-full p-4",onClick:t[0]||(t[0]=(0,r.D$)(function(){},["stop"]))},[t[4]||(t[4]=(0,n.Lk)("h1",{class:"text-xl font-bold mb-6 text-white"},"视频详情",-1)),o.videoData?((0,n.uX)(),(0,n.CE)("div",We,[(0,n.Lk)("video",ze,[(0,n.Lk)("source",{src:o.videoData,type:"video/mp4"},null,8,$e),t[2]||(t[2]=(0,n.eW)(" 您的浏览器不支持视频播放 "))])])):((0,n.uX)(),(0,n.CE)("div",qe,t[3]||(t[3]=[(0,n.Lk)("p",{class:"text-gray-300"},"无视频数据",-1)])))])])}const He={props:{videoUrl:String,showClose:{type:Boolean,default:!0}},data:function(){return{videoData:null}},created:function(){this.videoData=this.videoUrl,this.videoUrl||localStorage.removeItem("tempVideo")}},Je=(0,h.A)(He,[["render",Ye]]),Ze=Je;a(7764),a(2953),a(8408),a(4603),a(7566),a(8721);var et=a(4335),tt=et.A.create({baseURL:"/api",timeout:2e4});tt.interceptors.request.use(function(e){return e},function(e){return Promise.reject(e)}),tt.interceptors.response.use(function(e){return e},function(e){return e.response?console.error("API Error:",e.response.status,e.response.data):e.request?console.error("Network Error:",e.request):console.error("Error:",e.message),Promise.reject(e)});var at=function(e,t){return tt.post("/search/text",new URLSearchParams({queryContent:e,threshold:t}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},rt=function(e,t){var a=new FormData;return a.append("file",e),a.append("topk",t),tt.post("/search/picture",a,{headers:{"Content-Type":"multipart/form-data"}})},nt=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new FormData;return r.append("file",e),r.append("topk",t),tt.post("/search/video",r,(0,Te.A)({headers:{"Content-Type":"multipart/form-data"}},a))},lt=function(e){var t=new FormData;return t.append("file",e),tt.post("/upload",t,{headers:{"Content-Type":"multipart/form-data"}})},ot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Social_Network_1";return tt.get("/getOriginalTweetById",{params:{id:e,space_name:t}})},st=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Social_Network_1";return tt.get("/getRelatedById",{params:{id:e,space_name:t}})},it=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Social_Network_1";return tt.get("/getRelatedByEvent",{params:{event:e,space_name:t}})};const ut=tt;a(8706),a(3288),a(8156);function ct(e){if(!e)return"";var t=new Date(e);return t.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}const dt={name:"SearchView",components:{ImageShow:Qe,VideoShow:Ze},setup:function(){var e=(0,d.rd)(),t=Xe(),a=(0,c.KR)(""),r=(0,c.KR)("text"),l=(0,c.KR)(null),o=(0,c.KR)(""),s=(0,c.KR)(.5),i=(0,c.KR)(5),u=(0,c.KR)(!1),p=(0,c.KR)(!1),v=(0,c.KR)(""),g=(0,n.EW)({get:function(){return"text"===r.value?s.value:i.value},set:function(e){"text"===r.value?s.value=e:i.value=e}});(0,n.wB)(function(){return t.selectedPlatform},function(){t.setCurrentPage(1)});var f=function(e){e.target.classList.add("border-blue-400","bg-blue-50")},m=function(e){e.target.classList.remove("border-blue-400","bg-blue-50")},h=function(e){var t=e.dataTransfer.files;if(0!==t.length){var a={target:{files:t}};L(a)}},y=function(){var e=(0,De.A)((0,Se.A)().m(function e(){var n,o,s,i,u,c,d,p,v;return(0,Se.A)().w(function(e){while(1)switch(e.n){case 0:if(t.setErrorMessage(""),t.resetPagination(),t.setLoading(!0),e.p=1,s=null,"image"!==r.value&&"video"!==r.value||l.value){e.n=2;break}return t.setErrorMessage("请上传".concat("image"===r.value?"图片":"视频","文件")),t.setLoading(!1),e.a(2);case 2:if("image"!==r.value||"image"===(null===(n=l.value)||void 0===n?void 0:n.type.split("/")[0])){e.n=3;break}return t.setErrorMessage("当前选择的是图片查询，请上传图片文件"),t.setLoading(!1),e.a(2);case 3:if("video"!==r.value||"video"===(null===(o=l.value)||void 0===o?void 0:o.type.split("/")[0])){e.n=4;break}return t.setErrorMessage("当前选择的是视频查询，请上传视频文件"),t.setLoading(!1),e.a(2);case 4:if("text"!==r.value){e.n=7;break}if(a.value.trim()){e.n=5;break}return t.setErrorMessage("请输入查询文本"),t.setLoading(!1),e.a(2);case 5:return e.n=6,at(a.value,g.value);case 6:i=e.v,s=i.data.search_results,e.n=11;break;case 7:if("image"!==r.value){e.n=9;break}return e.n=8,rt(l.value,g.value);case 8:u=e.v,s=u.data.search_results,e.n=11;break;case 9:if("video"!==r.value){e.n=11;break}return e.n=10,nt(l.value,g.value,{timeout:6e4});case 10:c=e.v,s=c.data.search_results;case 11:d=s.map(function(e){return(0,Te.A)((0,Te.A)({},e),{},{datasource:"weibo"===e.datasource?"微博":e.datasource})}),t.setResults(d),e.n=13;break;case 12:e.p=12,v=e.v,console.error("查询失败:",v),t.setErrorMessage((null===(p=v.response)||void 0===p||null===(p=p.data)||void 0===p?void 0:p.error)||"查询过程中发生错误，请重试");case 13:return e.p=13,t.setLoading(!1),e.f(13);case 14:return e.a(2)}},e,null,[[1,12,13,14]])}));return function(){return e.apply(this,arguments)}}(),k=function(e){v.value=e,u.value=!0},b=function(e){v.value=e,p.value=!0},x=function(){u.value=!1,p.value=!1},w=function(){var a=(0,De.A)((0,Se.A)().m(function a(r){var n,l;return(0,Se.A)().w(function(a){while(1)switch(a.n){case 0:if(n=r.id,l=r.event,console.log("SearchView点击事件触发，ID:",n,"Event:",l),n){a.n=1;break}return t.setErrorMessage("ID不存在"),a.a(2);case 1:e.push({path:"/path",query:{id:n,event:l}});case 2:return a.a(2)}},a)}));return function(e){return a.apply(this,arguments)}}(),L=function(){var e=(0,De.A)((0,Se.A)().m(function e(a){var n,s,i,u,c;return(0,Se.A)().w(function(e){while(1)switch(e.n){case 0:if(s=null===(n=a.target)||void 0===n||null===(n=n.files)||void 0===n?void 0:n[0],s){e.n=1;break}return e.a(2);case 1:if(t.setErrorMessage(""),o.value="",i=s.type.split("/")[0],"image"!==r.value||"image"===i){e.n=2;break}return o.value="❌ 请上传图片文件",e.a(2);case 2:if("video"!==r.value||"video"===i){e.n=3;break}return o.value="❌ 请上传视频文件",e.a(2);case 3:return l.value=s,o.value="📤 正在上传...",e.p=4,e.n=5,lt(s);case 5:u=e.v,200===u.status?o.value="✅ 上传成功：".concat(s.name):o.value="❌ 上传失败：".concat(u.data.message||"服务器错误"),e.n=7;break;case 6:e.p=6,c=e.v,o.value="❌ 网络错误：".concat(c.message);case 7:return e.a(2)}},e,null,[[4,6]])}));return function(t){return e.apply(this,arguments)}}();return(0,Te.A)({queryContent:a,contentType:r,selectedFile:l,uploadStatus:o,threshold:s,topK:i,currentValue:g,executeSearch:y,onDragOver:f,onDragLeave:m,onDrop:h,handleFileUpload:L,formatDate:ct,viewImage:k,viewVideo:b,switchToPathWithId:w,showImageModal:u,showVideoModal:p,currentMediaUrl:v,closeModal:x,traceStore:t},t)}},pt=(0,h.A)(dt,[["render",_e],["__scopeId","data-v-ceee6770"]]),vt=pt;var gt={class:"path-view"},ft={class:"bg-white rounded-xl shadow-lg p-6 mb-6"},mt={class:"text-xl font-semibold text-gray-800 mb-4 flex items-center"},ht={key:0,class:"ml-2 text-sm text-gray-500"},yt={class:"mb-4 flex items-center"},kt=["disabled"],bt={key:0,class:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200"},xt={class:"mb-4 p-2 bg-blue-50 rounded border border-blue-100"},wt={class:"text-gray-700 mb-3"},Lt={class:"flex flex-wrap gap-4 text-sm text-gray-500"},Ct={key:0,class:"flex items-center"},Et={key:0,class:"mt-4"},_t={class:"flex flex-wrap gap-2"},St=["src","onClick"],Tt={key:1,class:"text-center py-12"},Dt={key:2},It={key:0},Xt={ref:"chartContainer",class:"w-full h-[500px] border border-gray-200 rounded-lg mb-6"},At={key:0,class:"bg-white rounded-xl shadow-md p-6 border border-gray-100"},Pt={class:"flex justify-between items-start"},Rt={class:"text-lg font-semibold text-gray-900"},Nt={key:0,class:"text-sm text-gray-500 mt-1"},Gt={key:1,class:"mt-4 text-gray-700"},Kt={class:"mt-4 bg-gray-50 p-4 rounded-lg"},Ut={class:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm"},Mt={key:0},jt={class:"font-medium"},Vt={key:1,class:"text-center py-8 border border-dashed border-gray-200 rounded-lg"},Ot={class:"text-gray-500"},Bt=["src"];function Ft(e,t,a,l,o,s){return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",gt,[(0,n.Lk)("div",ft,[(0,n.Lk)("h3",mt,[t[9]||(t[9]=(0,n.eW)(" 传播图谱 ")),l.hasSearched&&l.currentGraphId?((0,n.uX)(),(0,n.CE)("span",ht,"查询:推文_ "+(0,p.v_)(l.currentGraphId),1)):(0,n.Q3)("",!0),l.hasSearched&&l.currentGraphId?((0,n.uX)(),(0,n.CE)("button",{key:1,onClick:t[0]||(t[0]=function(){return l.clearGraph&&l.clearGraph.apply(l,arguments)}),class:"ml-4 text-sm text-gray-500 hover:text-gray-700 transition-colors"},t[8]||(t[8]=[(0,n.Lk)("i",{class:"fa fa-times mr-1"},null,-1),(0,n.eW)(" 关闭图谱 ")]))):(0,n.Q3)("",!0)]),(0,n.Lk)("div",yt,[t[10]||(t[10]=(0,n.Lk)("label",{for:"graphId",class:"block text-sm font-medium text-gray-700 mr-2"},"查询内容:",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.currentGraphId=e}),type:"text",id:"graphId",class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-300",placeholder:"请输入推文ID查看传播图谱"},null,512),[[r.Jo,l.currentGraphId]]),(0,n.Lk)("button",{onClick:t[2]||(t[2]=function(e){return l.loadGraphData(l.currentGraphId)}),class:"ml-2 bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-lg transition-all duration-300",disabled:!l.currentGraphId}," 加载 ",8,kt)]),l.hasSearched&&l.originalTweet&&l.originalTweet.results&&l.originalTweet.results.length>0?((0,n.uX)(),(0,n.CE)("div",bt,[t[16]||(t[16]=(0,n.Lk)("h4",{class:"text-lg font-semibold text-gray-800 mb-3"},"推文原文",-1)),(0,n.Lk)("div",xt,[t[11]||(t[11]=(0,n.Lk)("span",{class:"font-medium text-blue-800"},"关联事件：",-1)),(0,n.Lk)("a",{onClick:t[3]||(t[3]=function(e){return l.switchToEventView(l.currentGraphEvent)}),class:"text-primary hover:text-primary/80 hover:underline cursor-pointer"},(0,p.v_)(l.currentGraphEvent||"无关联事件"),1)]),(0,n.Lk)("div",wt,(0,p.v_)(l.originalTweet.results[0].src_v.content),1),(0,n.Lk)("div",Lt,[(0,n.Lk)("div",null,[t[12]||(t[12]=(0,n.Lk)("span",{class:"font-medium"},"发布者:",-1)),(0,n.eW)(" "+(0,p.v_)(l.originalTweet.results[0].src_v.uname),1)]),(0,n.Lk)("div",null,[t[13]||(t[13]=(0,n.Lk)("span",{class:"font-medium"},"发布时间:",-1)),(0,n.eW)(" "+(0,p.v_)(l.formatDate(l.originalTweet.results[0].src_v.publishtimestamp)),1)]),null!==l.originalTweet.results[0].src_v.isrumor?((0,n.uX)(),(0,n.CE)("div",Ct,[t[14]||(t[14]=(0,n.Lk)("span",{class:"font-medium"},"类型:",-1)),(0,n.Lk)("span",{class:(0,p.C4)([{"bg-green-100 text-green-800 ml-1":!l.originalTweet.results[0].src_v.isrumor,"bg-red-100 text-red-800 ml-1":l.originalTweet.results[0].src_v.isrumor},"text-xs px-2 py-0.5 rounded font-medium"])},(0,p.v_)(l.originalTweet.results[0].src_v.isrumor?"谣言":"真实"),3)])):(0,n.Q3)("",!0)]),l.originalTweet.results[0].src_v.pics_url?((0,n.uX)(),(0,n.CE)("div",Et,[t[15]||(t[15]=(0,n.Lk)("h5",{class:"text-sm font-medium text-gray-700 mb-2"},"图片:",-1)),(0,n.Lk)("div",_t,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.originalTweet.results[0].src_v.pics_url.split(", "),function(e,t){return(0,n.uX)(),(0,n.CE)("img",{key:t,src:e,class:"max-h-40 max-w-40 object-cover rounded-md border border-gray-200 cursor-pointer hover:opacity-90 transition-opacity",alt:"推文图片",onClick:function(t){return l.handleImageClick(e)}},null,8,St)}),128))])])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),l.loadingGraph?((0,n.uX)(),(0,n.CE)("div",Tt,t[17]||(t[17]=[(0,n.Lk)("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1),(0,n.Lk)("p",{class:"mt-2 text-gray-500"},"正在加载传播图谱...",-1)]))):((0,n.uX)(),(0,n.CE)("div",Dt,[l.hasSearched&&l.relatedData&&l.relatedData.results&&l.relatedData.results.length>0?((0,n.uX)(),(0,n.CE)("div",It,[(0,n.Lk)("div",Xt,null,512),l.selectedNode?((0,n.uX)(),(0,n.CE)("div",At,[(0,n.Lk)("div",Pt,[(0,n.Lk)("h4",Rt,(0,p.v_)(l.getNodeTitle(l.selectedNode)),1),null!==l.selectedNode.isrumor?((0,n.uX)(),(0,n.CE)("span",{key:0,class:(0,p.C4)([{"bg-green-100 text-green-800":!l.selectedNode.isrumor,"bg-red-100 text-red-800":l.selectedNode.isrumor},"text-xs px-2 py-0.5 rounded font-medium"])},(0,p.v_)(l.selectedNode.isrumor?"谣言":"真实"),3)):(0,n.Q3)("",!0)]),l.selectedNode.publishtimestamp||l.selectedNode.republishtime?((0,n.uX)(),(0,n.CE)("div",Nt,(0,p.v_)(l.formatDate(l.selectedNode.publishtimestamp||l.selectedNode.republishtime)),1)):(0,n.Q3)("",!0),l.selectedNode.content?((0,n.uX)(),(0,n.CE)("div",Gt,[(0,n.Lk)("p",null,(0,p.v_)(l.selectedNode.content),1)])):(0,n.Q3)("",!0),(0,n.Lk)("div",Kt,[t[20]||(t[20]=(0,n.Lk)("h5",{class:"font-medium text-gray-800 mb-2"},"节点属性",-1)),(0,n.Lk)("div",Ut,[(0,n.Lk)("div",null,[t[18]||(t[18]=(0,n.Lk)("span",{class:"font-medium"},"VID:",-1)),(0,n.eW)(" "+(0,p.v_)(l.selectedNode.vid||"-"),1)]),(0,n.Lk)("div",null,[t[19]||(t[19]=(0,n.Lk)("span",{class:"font-medium"},"类型:",-1)),(0,n.eW)(" "+(0,p.v_)(l.getNodeType(l.selectedNode)||"-"),1)]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.selectedNode,function(e,t){return(0,n.uX)(),(0,n.CE)(n.FK,{key:t},[["vid","e_type","title","content","publishtimestamp","isrumor"].includes(t)?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",Mt,[(0,n.Lk)("span",jt,(0,p.v_)(t)+":",1),(0,n.eW)(" "+(0,p.v_)(e||"-"),1)]))],64)}),128))])]),(0,n.Lk)("button",{onClick:t[4]||(t[4]=function(){return l.closeNodeDetail&&l.closeNodeDetail.apply(l,arguments)}),class:"mt-4 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-200"},t[21]||(t[21]=[(0,n.Lk)("i",{class:"fa fa-times mr-1"},null,-1),(0,n.eW)(" 关闭详情 ")]))])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),!l.hasSearched||l.relatedData&&l.relatedData.results&&0!==l.relatedData.results.length?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",Vt,[t[22]||(t[22]=(0,n.Lk)("i",{class:"fa fa-search-minus text-gray-300 text-4xl mb-2"},null,-1)),(0,n.Lk)("p",Ot,'未找到与 "'+(0,p.v_)(l.currentGraphId)+'" 相关的图谱数据',1)]))]))])]),l.showImageModal?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4",onClick:t[7]||(t[7]=function(){return l.closeImageModal&&l.closeImageModal.apply(l,arguments)})},[(0,n.Lk)("div",{class:"relative max-w-4xl max-h-[90vh]",onClick:t[6]||(t[6]=(0,r.D$)(function(){},["stop"]))},[(0,n.Lk)("button",{class:"absolute -top-12 right-0 text-white text-2xl hover:text-gray-300 transition-colors",onClick:t[5]||(t[5]=function(){return l.closeImageModal&&l.closeImageModal.apply(l,arguments)})},t[23]||(t[23]=[(0,n.Lk)("i",{class:"fa fa-times"},null,-1)])),(0,n.Lk)("img",{src:l.selectedImageUrl,class:"max-w-full max-h-[90vh] object-contain",alt:"放大图片"},null,8,Bt)])])):(0,n.Q3)("",!0)],64)}var Qt=a(3644),Wt=(a(1629),a(3418),a(7588),a(6033),a(8130),a(3500),a(3680));const zt={name:"PathView",props:{initialGraphId:{type:String,default:""},initialGraphEvent:{type:String,default:""}},emits:["clearGraph"],setup:function(e,t){var a=t.emit,r=(0,c.KR)(!1),l=(0,c.KR)(e.initialGraphId),o=(0,c.KR)(e.initialGraphEvent),s=(0,c.KR)(null),i=(0,c.KR)(!1),u=(0,c.KR)(null),p=(0,c.KR)(null),v=(0,c.KR)(null),g=(0,c.KR)(!1),f=(0,c.KR)(!1),m=(0,c.KR)(""),h=(0,c.KR)(null),y=(0,d.rd)(),k=(0,c.KR)(!1),b=(0,c.KR)("");(0,n.wB)(function(){return e.initialGraphId},function(e){e&&e!==l.value&&(console.log("从路由参数接收推文ID:",e),l.value=e,L(e))},{immediate:!0}),(0,n.sV)(function(){e.initialGraphId&&(console.log("组件挂载时检测到初始ID:",e.initialGraphId),L(e.initialGraphId))}),(0,n.wB)(function(){return e.initialGraphEvent},function(e){o.value=e});var x=function(e){console.log("点击关联事件，事件数据:",e),e&&y.push({path:"/event",query:{event:e}})},w=function(e){if(!e)return"";var t=e;String(e).length<13&&(t=1e3*Number(e));var a=new Date(t),r=a.getFullYear(),n=String(a.getMonth()+1).padStart(2,"0"),l=String(a.getDate()).padStart(2,"0"),o=String(a.getHours()).padStart(2,"0"),s=String(a.getMinutes()).padStart(2,"0"),i=String(a.getSeconds()).padStart(2,"0");return"".concat(r,"/").concat(n,"/").concat(l," ").concat(o,":").concat(s,":").concat(i)},L=function(){var e=(0,De.A)((0,Se.A)().m(function e(t){var a,l,o,u,c;return(0,Se.A)().w(function(e){while(1)switch(e.n){case 0:if(t){e.n=1;break}return e.a(2);case 1:return i.value=!0,m.value="",r.value=!0,e.p=2,e.n=3,Promise.all([st(t),ot(t)]);case 3:return a=e.v,l=(0,Qt.A)(a,2),o=l[0],u=l[1],s.value=null,h.value=null,e.n=4,(0,n.dY)();case 4:s.value=o.data,h.value=u.data,g.value=!1,(0,n.dY)(function(){g.value=!0,E()}),e.n=6;break;case 5:e.p=5,c=e.v,console.error("查询关联内容失败:",c),_(c);case 6:return e.p=6,i.value=!1,e.f(6);case 7:return e.a(2)}},e,null,[[2,5,6,7]])}));return function(t){return e.apply(this,arguments)}}(),C=function(){l.value="",s.value=null,p.value=null,h.value=null,r.value=!1,u.value&&(u.value.dispose(),u.value=null),a("clearGraph")};(0,n.wB)(v,function(e){e&&(f.value=!0,E())}),(0,n.wB)(s,function(){s.value&&s.value.results&&s.value.results.length>0&&(g.value=!0,E())});var E=function(){g.value&&f.value&&S()},_=function(e){e.response?console.error("请求失败 (".concat(e.response.status,"):"),e.response.data):e.request?console.error("没有收到服务器响应:",e.request):console.error("请求错误:",e.message)},S=function(){var e;if(v.value&&null!==(e=s.value)&&void 0!==e&&e.results&&l.value){u.value&&u.value.dispose(),u.value=Wt.Ts(v.value);var t=new Map,a=[],r=new Map,n=0,o=l.value;t.set(o,{id:o,name:"推文原文",symbolSize:60,itemStyle:{color:"#FBBC05"},category:0,draggable:!0,originalData:{vid:o,type:"Original_Tweet"}}),r.set("Original_Tweet",0),n=1,s.value.results.forEach(function(e){if(e.e_src){var l,s=e.src_type||"Unknown",i=e.src_props||{},u=e.e_src;if("belong"===e.e_type)l=o;else{if("forwarded"!==e.e_type)return;if(!e.e_dst)return;l=e.e_dst}if(!t.has(u)){var c,d="Original_Tweet"===s?"Unknown":s;r.has(d)||(r.set(d,n),n++),c=i.content?i.content.substring(0,8)+"...":i.retext?i.retext.substring(0,8)+"...":i.title?i.title.substring(0,8)+"...":"推文原文",t.set(u,{id:u,name:c,symbolSize:D(d),itemStyle:{color:T(d)},category:r.get(d),draggable:!0,originalData:(0,Te.A)((0,Te.A)({},i),{},{vid:u,type:d})})}if("forwarded"===e.e_type&&!t.has(l)){var p=e.dst_type||"Unknown",v=e.dst_props||{},g="Original_Tweet"===p?"Unknown":p;r.has(g)||(r.set(g,n),n++);var f=v.title||v.name;f||(f=l.slice(0,8)+"..."),t.set(l,{id:l,name:f,symbolSize:D(g),itemStyle:{color:T(g)},category:r.get(g),draggable:!0,originalData:(0,Te.A)((0,Te.A)({},v),{},{vid:l,type:g})})}a.push({source:u,target:l,name:e.e_type,lineStyle:{width:"belong"===e.e_type?3:2,curveness:"belong"===e.e_type?.1:.2,color:"belong"===e.e_type?"#52c41a":"#faad14",opacity:.9}})}else console.warn("跳过无效边数据:",e)});var i={tooltip:{formatter:function(e){return"node"===e.dataType?"".concat(e.data.name,"<br/>类型: ").concat(e.data.originalData.type):"edge"===e.dataType?"关系: ".concat(e.data.name):e.name}},legend:{data:Array.from(r.entries()).filter(function(e){var t=(0,Qt.A)(e,1),a=t[0];return a}).map(function(e){var t=(0,Qt.A)(e,1),a=t[0];return a}),bottom:10},series:[{type:"graph",layout:"force",force:{repulsion:350,edgeLength:120},roam:!0,label:{show:!0,fontSize:12,overflow:"truncate"},edgeSymbol:["none","arrow"],edgeSymbolSize:[0,8],edgeLabel:{fontSize:10,formatter:"{b}"},data:Array.from(t.values()),links:a,categories:Array.from(r.entries()).map(function(e){var t=(0,Qt.A)(e,1),a=t[0];return{name:a,itemStyle:{color:T(a)}}})}]};u.value.setOption(i),u.value.on("click",function(e){var t;"node"===e.dataType&&("Original_Tweet"===(null===(t=e.data.originalData)||void 0===t?void 0:t.type)?window.scrollTo({top:0,behavior:"smooth"}):p.value=e.data.originalData)}),window.addEventListener("resize",function(){u.value&&u.value.resize()})}else console.error("Chart container or data not found")},T=function(e){var t={Event:"#1890ff",Article:"#34A853",Original_Tweet:"#FBBC05",Retweet:"#F2994A",User:"#9B51E0",Comment:"#EA4335",Unknown:"#8884d8"};return t[e]||t["Unknown"]},D=function(e){var t={Event:50,Article:40,Original_Tweet:40,Retweet:30,User:30,Comment:30,Unknown:35};return t[e]||t["Unknown"]},I=function(){p.value=null},X=function(e){return e.title||"转发节点"},A=function(e){return e.type||e.e_type||"未知类型"},P=function(e){b.value=e,k.value=!0},R=function(){k.value=!1,b.value=""};return{currentGraphId:l,relatedData:s,loadingGraph:i,chart:u,selectedNode:p,chartContainer:v,errorMessage:m,loadGraphData:L,clearGraph:C,closeNodeDetail:I,getNodeTitle:X,getNodeType:A,formatDate:w,originalTweet:h,currentGraphEvent:o,switchToEventView:x,hasSearched:r,showImageModal:k,selectedImageUrl:b,handleImageClick:P,closeImageModal:R}}},$t=(0,h.A)(zt,[["render",Ft]]),qt=$t;var Yt={class:"path-view"},Ht={class:"bg-white rounded-white rounded rounded-xl shadow-lg p-6 mb-6"},Jt={class:"text-xl font-semibold text-gray-800 mb-4 flex items-center"},Zt={key:0,class:"ml-2 text-sm text-gray-500"},ea={class:"mb-4 flex items-center"},ta=["disabled"],aa={key:0,class:"text-center py-12"},ra={key:1},na={key:0},la={ref:"chartContainer",class:"w-full h-[500px] border border-gray-200 rounded-lg mb-6"},oa={key:0,class:"bg-white rounded-xl shadow-md p-6 border border-gray-100"},sa={class:"flex justify-between items-start"},ia={class:"text-lg font-semibold text-gray-900"},ua={key:0,class:"text-sm text-gray-500 mt-1"},ca={key:0},da={key:1,class:"ml-3"},pa={key:1,class:"mt-4 text-gray-700"},va={class:"mt-4 bg-gray-50 p-4 rounded-lg"},ga={class:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm"},fa={key:0},ma={class:"font-medium"},ha={key:1,class:"text-center py-8 border border-dashed border-gray-200 rounded-lg"},ya={class:"text-gray-500"};function ka(e,t,a,l,o,s){return(0,n.uX)(),(0,n.CE)("div",Yt,[(0,n.Lk)("div",Ht,[(0,n.Lk)("h3",Jt,[t[5]||(t[5]=(0,n.eW)(" 传播图谱 ")),l.hasSearched&&l.currentGraphEvent?((0,n.uX)(),(0,n.CE)("span",Zt,"查询:事件_ "+(0,p.v_)(l.currentGraphEvent),1)):(0,n.Q3)("",!0),l.hasSearched&&l.currentGraphEvent?((0,n.uX)(),(0,n.CE)("button",{key:1,onClick:t[0]||(t[0]=function(){return l.clearGraph&&l.clearGraph.apply(l,arguments)}),class:"ml-4 text-sm text-gray-500 hover:text-gray-700 transition-colors"},t[4]||(t[4]=[(0,n.Lk)("i",{class:"fa fa-times mr-1"},null,-1),(0,n.eW)(" 关闭图谱 ")]))):(0,n.Q3)("",!0)]),(0,n.Lk)("div",ea,[t[6]||(t[6]=(0,n.Lk)("label",{for:"graphEvent",class:"block text-sm font-medium text-gray-700 mr-2"},"查询内容:",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.currentGraphEvent=e}),type:"text",id:"graphEvent",class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-300",placeholder:"请输入事件名称查看传播图谱"},null,512),[[r.Jo,l.currentGraphEvent]]),(0,n.Lk)("button",{onClick:t[2]||(t[2]=function(e){return l.loadGraphData(l.currentGraphEvent)}),class:"ml-2 bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-lg transition-all duration-300",disabled:!l.currentGraphEvent}," 加载 ",8,ta)]),l.loadingGraph?((0,n.uX)(),(0,n.CE)("div",aa,t[7]||(t[7]=[(0,n.Lk)("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1),(0,n.Lk)("p",{class:"mt-2 text-gray-500"},"正在加载传播图谱...",-1)]))):((0,n.uX)(),(0,n.CE)("div",ra,[l.hasSearched?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[l.relatedData&&l.relatedData.results&&l.relatedData.results.length>0?((0,n.uX)(),(0,n.CE)("div",na,[(0,n.Lk)("div",la,null,512),l.selectedNode?((0,n.uX)(),(0,n.CE)("div",oa,[(0,n.Lk)("div",sa,[(0,n.Lk)("h4",ia,(0,p.v_)(l.getNodeTitle(l.selectedNode)),1),null!==l.selectedNode.isrumor?((0,n.uX)(),(0,n.CE)("span",{key:0,class:(0,p.C4)([{"bg-green-100 text-green-800":!l.selectedNode.isrumor,"bg-red-100 text-red-800":l.selectedNode.isrumor},"text-xs px-2 py-0.5 rounded font-medium"])},(0,p.v_)(l.selectedNode.isrumor?"谣言":"真实"),3)):(0,n.Q3)("",!0)]),l.selectedNode.publishtimestamp||l.selectedNode.republishtime||l.selectedNode.datasource?((0,n.uX)(),(0,n.CE)("div",ua,[l.selectedNode.publishtimestamp||l.selectedNode.republishtime?((0,n.uX)(),(0,n.CE)("span",ca,(0,p.v_)(l.formatDate(l.selectedNode.publishtimestamp||l.selectedNode.republishtime)),1)):(0,n.Q3)("",!0),l.selectedNode.datasource?((0,n.uX)(),(0,n.CE)("span",da," 数据源："+(0,p.v_)(l.selectedNode.datasource),1)):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),l.selectedNode.content?((0,n.uX)(),(0,n.CE)("div",pa,[(0,n.Lk)("p",null,(0,p.v_)(l.selectedNode.content),1)])):(0,n.Q3)("",!0),(0,n.Lk)("div",va,[t[10]||(t[10]=(0,n.Lk)("h5",{class:"font-medium text-gray-800 mb-2"},"节点属性",-1)),(0,n.Lk)("div",ga,[(0,n.Lk)("div",null,[t[8]||(t[8]=(0,n.Lk)("span",{class:"font-medium"},"VID:",-1)),(0,n.eW)(" "+(0,p.v_)(l.selectedNode.vid||"-"),1)]),(0,n.Lk)("div",null,[t[9]||(t[9]=(0,n.Lk)("span",{class:"font-medium"},"类型:",-1)),(0,n.eW)(" "+(0,p.v_)(l.getNodeType(l.selectedNode)||"-"),1)]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.selectedNode,function(e,t){return(0,n.uX)(),(0,n.CE)(n.FK,{key:t},[["vid","e_type","title","content","publishtimestamp","isrumor"].includes(t)?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",fa,[(0,n.Lk)("span",ma,(0,p.v_)(t)+":",1),(0,n.eW)(" "+(0,p.v_)(e||"-"),1)]))],64)}),128))])]),(0,n.Lk)("button",{onClick:t[3]||(t[3]=function(){return l.closeNodeDetail&&l.closeNodeDetail.apply(l,arguments)}),class:"mt-4 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-200"},t[11]||(t[11]=[(0,n.Lk)("i",{class:"fa fa-times mr-1"},null,-1),(0,n.eW)(" 关闭详情 ")]))])):(0,n.Q3)("",!0)])):((0,n.uX)(),(0,n.CE)("div",ha,[t[12]||(t[12]=(0,n.Lk)("i",{class:"fa fa-search-minus text-gray-300 text-4xl mb-2"},null,-1)),(0,n.Lk)("p",ya,'未找到与 "'+(0,p.v_)(l.currentGraphEvent)+'" 相关的图谱数据',1)]))],64)):(0,n.Q3)("",!0)]))])])}const ba={name:"EventView",props:{initialGraphEvent:{type:String,default:""}},emits:["clearGraph"],setup:function(e,t){var a=t.emit,r=(0,c.KR)(e.initialGraphEvent),l=(0,c.KR)(null),o=(0,c.KR)(!1),s=(0,c.KR)(null),i=(0,c.KR)(null),u=(0,c.KR)(null),p=(0,c.KR)(!1),v=(0,c.KR)(!1),g=(0,c.KR)(""),f=(0,c.KR)(!!e.initialGraphEvent),m=(0,d.rd)(),h=function(e){if(!e)return"";var t=e;String(e).length<13&&(t=1e3*Number(e));var a=new Date(t),r=a.getFullYear(),n=String(a.getMonth()+1).padStart(2,"0"),l=String(a.getDate()).padStart(2,"0"),o=String(a.getHours()).padStart(2,"0"),s=String(a.getMinutes()).padStart(2,"0"),i=String(a.getSeconds()).padStart(2,"0");return"".concat(r,"/").concat(n,"/").concat(l," ").concat(o,":").concat(s,":").concat(i)},y=function(){var e=(0,De.A)((0,Se.A)().m(function e(t){var a,r;return(0,Se.A)().w(function(e){while(1)switch(e.n){case 0:if(t){e.n=1;break}return e.a(2);case 1:return o.value=!0,g.value="",f.value=!0,e.p=2,e.n=3,it(t);case 3:return a=e.v,l.value=null,e.n=4,(0,n.dY)();case 4:l.value=a.data,p.value=!1,(0,n.dY)(function(){p.value=!0,b()}),e.n=6;break;case 5:e.p=5,r=e.v,console.error("查询关联内容失败:",r),x(r);case 6:return e.p=6,o.value=!1,e.f(6);case 7:return e.a(2)}},e,null,[[2,5,6,7]])}));return function(t){return e.apply(this,arguments)}}();(0,n.wB)(function(){return m.currentRoute.value.query.event},function(e){e&&e!==r.value&&(console.log("从路由参数接收事件名称:",e),r.value=e,y(e))},{immediate:!0}),(0,n.wB)(function(){return e.initialGraphEvent},function(e){console.log("EventView: initialGraphEvent changed to:",e),r.value=e,e&&y(e)});var k=function(){r.value="",l.value=null,i.value=null,f.value=!1,s.value&&(s.value.dispose(),s.value=null),a("clearGraph")};(0,n.wB)(u,function(e){e&&(v.value=!0,b())}),(0,n.wB)(l,function(){l.value&&l.value.results&&l.value.results.length>0&&(p.value=!0,b())});var b=function(){p.value&&v.value&&w()},x=function(e){e.response?console.error("请求失败 (".concat(e.response.status,"):"),e.response.data):e.request?console.error("没有收到服务器响应:",e.request):console.error("请求错误:",e.message)},w=function(){var e;if(u.value&&null!==(e=l.value)&&void 0!==e&&e.results&&r.value){s.value&&s.value.dispose(),s.value=Wt.Ts(u.value);var t=new Map,a=[],n=new Map,o=0,c=r.value;t.set(c,{id:c,name:c,symbolSize:60,itemStyle:{color:"#1890ff"},category:0,draggable:!0,originalData:{vid:c,type:"Event"}}),n.set("Event",0),o=1,l.value.results.forEach(function(e){if(e.e_src){var r,l=e.src_type||"Unknown",s=e.src_props||{},i=e.e_src;if("belong"===e.e_type)r=c;else{if("forwarded"!==e.e_type)return;if(!e.e_dst)return;r=e.e_dst}if(!t.has(i)){var u="Event"===l?"Unknown":l;n.has(u)||(n.set(u,o),o++);var d=s.title;d=!d&&s.content?s.content.substring(0,8)+"...":!d&&s.retext?s.retext.substring(0,8)+"...":s.title.substring(0,8)+"...",t.set(i,{id:i,name:d,symbolSize:C(u),itemStyle:{color:L(u)},category:n.get(u),draggable:!0,originalData:(0,Te.A)((0,Te.A)({},s),{},{vid:i,type:u})})}if("forwarded"===e.e_type&&!t.has(r)){var p=e.dst_type||"Unknown",v=e.dst_props||{},g="Event"===p?"Unknown":p;n.has(g)||(n.set(g,o),o++);var f=v.title||v.name;f||(f=r.slice(0,8)+"..."),t.set(r,{id:r,name:f,symbolSize:C(g),itemStyle:{color:L(g)},category:n.get(g),draggable:!0,originalData:(0,Te.A)((0,Te.A)({},v),{},{vid:r,type:g})})}a.push({source:i,target:r,name:e.e_type,lineStyle:{width:"belong"===e.e_type?3:2,curveness:"belong"===e.e_type?.1:.2,color:"belong"===e.e_type?"#52c41a":"#faad14",opacity:.9}})}else console.warn("跳过无效边数据:",e)});var d={tooltip:{formatter:function(e){return"node"===e.dataType?"".concat(e.data.name,"<br/>类型: ").concat(e.data.originalData.type):"edge"===e.dataType?"关系: ".concat(e.data.name):e.name}},legend:{data:Array.from(n.entries()).filter(function(e){var t=(0,Qt.A)(e,1),a=t[0];return a}).map(function(e){var t=(0,Qt.A)(e,1),a=t[0];return a}),bottom:10},series:[{type:"graph",layout:"force",force:{repulsion:350,edgeLength:120},roam:!0,label:{show:!0,fontSize:12,overflow:"truncate"},edgeSymbol:["none","arrow"],edgeSymbolSize:[0,8],edgeLabel:{fontSize:10,formatter:"{b}"},data:Array.from(t.values()),links:a,categories:Array.from(n.entries()).map(function(e){var t=(0,Qt.A)(e,1),a=t[0];return{name:a,itemStyle:{color:L(a)}}})}]};s.value.setOption(d),s.value.on("click",function(e){var t;"node"===e.dataType&&("Event"===(null===(t=e.data.originalData)||void 0===t?void 0:t.type)?window.scrollTo({top:0,behavior:"smooth"}):i.value=e.data.originalData)}),window.addEventListener("resize",function(){s.value&&s.value.resize()})}else console.error("Chart container or data not found")},L=function(e){var t={Event:"#1890ff",Article:"#34A853",Original_Tweet:"#FBBC05",Retweet:"#F2994A",User:"#9B51E0",Comment:"#EA4335",Unknown:"#8884d8"};return t[e]||t["Unknown"]},C=function(e){var t={Event:50,Article:40,Original_Tweet:40,Retweet:35,User:30,Comment:30,Unknown:35};return t[e]||t["Unknown"]},E=function(){i.value=null},_=function(e){return"Retweet"===e.type?"转发节点":"Original_Tweet"===e.type?"微博文章":e.title},S=function(e){return e.type||e.e_type||"未知类型"};return{currentGraphEvent:r,relatedData:l,loadingGraph:o,chart:s,selectedNode:i,chartContainer:u,errorMessage:g,hasSearched:f,loadGraphData:y,clearGraph:k,closeNodeDetail:E,getNodeTitle:_,getNodeType:S,formatDate:h}}},xa=(0,h.A)(ba,[["render",ka],["__scopeId","data-v-b56c9150"]]),wa=xa;var La={class:"page-container"};function Ca(e,t,a,r,l,o){return(0,n.uX)(),(0,n.CE)("div",La,t[0]||(t[0]=[(0,n.Lk)("h1",{class:"page-title"},"风险传播事件库",-1),(0,n.Lk)("div",{class:"page-content"},null,-1)]))}const Ea={name:"RiskView"},_a=(0,h.A)(Ea,[["render",Ca],["__scopeId","data-v-35800c5c"]]),Sa=_a;var Ta={class:"page-container"};function Da(e,t,a,r,l,o){return(0,n.uX)(),(0,n.CE)("div",Ta,t[0]||(t[0]=[(0,n.Lk)("h1",{class:"page-title"},"虚假信息知识库",-1),(0,n.Lk)("div",{class:"page-content"},null,-1)]))}const Ia={name:"FakeView"},Xa=(0,h.A)(Ia,[["render",Da],["__scopeId","data-v-600560f2"]]),Aa=Xa;var Pa={class:"page-container"};function Ra(e,t,a,r,l,o){return(0,n.uX)(),(0,n.CE)("div",Pa,t[0]||(t[0]=[(0,n.Lk)("h1",{class:"page-title"},"不良内容知识库",-1),(0,n.Lk)("div",{class:"page-content"},null,-1)]))}const Na={name:"BadView"},Ga=(0,h.A)(Na,[["render",Ra],["__scopeId","data-v-42567b56"]]),Ka=Ga;var Ua=[{path:"/",name:"Search",component:vt},{path:"/trace",name:"Trace",component:vt},{path:"/path",name:"Path",component:qt,props:function(e){return{initialGraphId:e.query.id,initialGraphEvent:e.query.event}}},{path:"/event",name:"Event",component:wa},{path:"/risk",name:"Risk",component:Sa},{path:"/fake",name:"Fake",component:Aa},{path:"/bad",name:"Bad",component:Ka}],Ma=(0,d.aE)({history:(0,d.LA)("/"),routes:Ua});const ja=Ma;var Va=(0,Ie.Ey)(),Oa=(0,r.Ef)(K);Oa.use(ja),Oa.use(Va),Oa.config.globalProperties.$axios=et.A,Oa.config.globalProperties.$api=ut,Oa.mount("#app")}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var l=t[r]={exports:{}};return e[r].call(l.exports,l,l.exports,a),l.exports}a.m=e,(()=>{var e=[];a.O=(t,r,n,l)=>{if(!r){var o=1/0;for(c=0;c<e.length;c++){for(var[r,n,l]=e[c],s=!0,i=0;i<r.length;i++)(!1&l||o>=l)&&Object.keys(a.O).every(e=>a.O[e](r[i]))?r.splice(i--,1):(s=!1,l<o&&(o=l));if(s){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[r,n,l]}})(),(()=>{a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={524:0};a.O.j=t=>0===e[t];var t=(t,r)=>{var n,l,[o,s,i]=r,u=0;if(o.some(t=>0!==e[t])){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(i)var c=i(a)}for(t&&t(r);u<o.length;u++)l=o[u],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(c)},r=self["webpackChunkgraph_database_frontend"]=self["webpackChunkgraph_database_frontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=a.O(void 0,[504],()=>a(6028));r=a.O(r)})();
//# sourceMappingURL=app.01fd14d5.js.map